
Action: file_editor create /app/index.html --file-text "<!DOCTYPE html>
<html lang=\"en\">
<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>QR Code Enhancer Pro</title>
    
    <!-- External Libraries -->
    <script src=\"https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js\"></script>
    <script src=\"https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js\"></script>
    <script src=\"https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js\"></script>
    <script src=\"https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js\"></script>
    <script src=\"https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js\"></script>
    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js\"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Iridescent Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                #1a0a2e 0%, 
                #2d1b4e 20%, 
                #4a1d6e 40%, 
                #5d2a7d 60%, 
                #3d1554 80%, 
                #1a0a2e 100%);
            z-index: -2;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(138, 43, 226, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(75, 0, 130, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 60% 70%, rgba(168, 85, 247, 0.2) 0%, transparent 50%);
            animation: moveGradient 15s ease infinite;
            z-index: -1;
        }

        @keyframes moveGradient {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(-10%, -10%) rotate(90deg);
            }
            50% {
                transform: translate(-20%, 0) rotate(180deg);
            }
            75% {
                transform: translate(-10%, 10%) rotate(270deg);
            }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .header {
            text-align: center;
            padding: 30px;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #a855f7, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .controls-section {
            padding: 20px;
            margin-bottom: 20px;
        }

        .upload-area {
            text-align: center;
            padding: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .upload-area:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            background: rgba(168, 85, 247, 0.8);
            color: white;
            margin: 5px;
        }

        .btn:hover {
            background: rgba(168, 85, 247, 1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(168, 85, 247, 0.4);
        }

        .btn-secondary {
            background: rgba(236, 72, 153, 0.8);
        }

        .btn-secondary:hover {
            background: rgba(236, 72, 153, 1);
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.4);
        }

        .settings-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .setting-group {
            padding: 15px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.03);
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .setting-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .setting-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .setting-content.expanded {
            max-height: 1000px;
            padding-top: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
        }

        input[type=\"text\"],
        input[type=\"number\"],
        select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        input[type=\"text\"]:focus,
        input[type=\"number\"]:focus,
        select:focus {
            outline: none;
            border-color: #a855f7;
            background: rgba(255, 255, 255, 0.08);
        }

        .toggle-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .toggle-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toggle-switch {
            width: 44px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #a855f7;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: white;
            top: 3px;
            left: 3px;
            transition: all 0.3s ease;
        }

        .toggle-switch.active::after {
            left: 23px;
        }

        .preview-section {
            padding: 20px;
            margin-bottom: 20px;
        }

        .preview-container {
            overflow-x: auto;
            padding: 20px 0;
        }

        .qr-grid {
            display: flex;
            gap: 20px;
            min-width: min-content;
        }

        .qr-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            min-width: 250px;
            text-align: center;
        }

        .qr-row-label {
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 15px;
        }

        .qr-preview {
            background: white;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            display: inline-block;
        }

        .qr-preview img,
        .qr-preview canvas {
            display: block;
            max-width: 200px;
            max-height: 200px;
        }

        .code-chip {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(168, 85, 247, 0.3);
            border-radius: 20px;
            font-size: 12px;
            margin: 5px 0;
        }

        .download-buttons {
            display: flex;
            gap: 5px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .data-table-section {
            padding: 20px;
            margin-bottom: 20px;
        }

        .table-container {
            max-height: 300px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .table-container.expanded {
            max-height: 800px;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(255, 255, 255, 0.05);
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td input {
            width: 100%;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .export-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
        }

        .arrow-icon {
            transition: transform 0.3s ease;
        }

        .arrow-icon.rotated {
            transform: rotate(180deg);
        }

        input[type=\"file\"] {
            display: none;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(168, 85, 247, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(168, 85, 247, 0.8);
        }

        .range-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
        }

        .range-input-group input {
            flex: 1;
        }

        option {
            background: #1a0a2e;
            color: white;
        }
    </style>
</head>
<body>
    <div class=\"container\">
        <!-- Header -->
        <div class=\"glass header\">
            <h1>‚ö° QR Code Enhancer Pro</h1>
            <p>Upload, Enhance & Export Multiple QR Codes</p>
        </div>

        <!-- Upload Section -->
        <div class=\"glass controls-section\">
            <div class=\"upload-area\" id=\"uploadArea\">
                <div class=\"upload-icon\">üì§</div>
                <h3>Click to Browse QR Code Images</h3>
                <p style=\"font-size: 14px; color: rgba(255,255,255,0.6); margin-top: 10px;\">
                    Supports JPG, PNG, and other image formats
                </p>
                <input type=\"file\" id=\"fileInput\" multiple accept=\"image/*\">
            </div>
            <div style=\"text-align: center;\">
                <button class=\"btn btn-secondary\" onclick=\"resetAll()\">üîÑ Reset / Clear All</button>
            </div>
        </div>

        <!-- Settings -->
        <div class=\"glass controls-section\">
            <h3 style=\"margin-bottom: 20px;\">‚öôÔ∏è Customization Settings</h3>
            
            <div class=\"settings-row\">
                <!-- Global Settings -->
                <div class=\"setting-group glass\">
                    <div class=\"setting-header\" onclick=\"toggleSection('global')\">
                        <span><strong>üåê Global Settings</strong></span>
                        <span class=\"arrow-icon\" id=\"arrow-global\">‚ñº</span>
                    </div>
                    <div class=\"setting-content\" id=\"content-global\">
                        <div class=\"form-group\">
                            <label>Output QR Size (px)</label>
                            <input type=\"number\" id=\"qrSize\" value=\"512\" min=\"128\" max=\"2048\" step=\"64\">
                        </div>
                        <div class=\"form-group\">
                            <label>Global Caption Text</label>
                            <input type=\"text\" id=\"globalCaption\" placeholder=\"Enter caption for all QRs\">
                        </div>
                    </div>
                </div>

                <!-- Code Label Settings -->
                <div class=\"setting-group glass\">
                    <div class=\"setting-header\" onclick=\"toggleSection('code')\">
                        <span><strong>üè∑Ô∏è Code Label Customization</strong></span>
                        <span class=\"arrow-icon\" id=\"arrow-code\">‚ñº</span>
                    </div>
                    <div class=\"setting-content\" id=\"content-code\">
                        <div class=\"form-group\">
                            <label>Font Family</label>
                            <select id=\"codeFont\">
                                <option value=\"Arial\">Arial</option>
                                <option value=\"Helvetica\">Helvetica</option>
                                <option value=\"Times New Roman\">Times New Roman</option>
                                <option value=\"Courier New\">Courier New</option>
                                <option value=\"Verdana\">Verdana</option>
                                <option value=\"Georgia\">Georgia</option>
                            </select>
                        </div>
                        <div class=\"form-group\">
                            <label>Font Size (px)</label>
                            <input type=\"number\" id=\"codeFontSize\" value=\"24\" min=\"8\" max=\"72\">
                        </div>
                        <div class=\"form-group\">
                            <label>Gap from QR (mm)</label>
                            <input type=\"number\" id=\"codeGap\" value=\"5\" min=\"0\" max=\"50\">
                        </div>
                        <div class=\"toggle-group\">
                            <div class=\"toggle-item\">
                                <div class=\"toggle-switch\" id=\"codeBold\" onclick=\"toggleSwitch('codeBold')\"></div>
                                <label>Bold</label>
                            </div>
                            <div class=\"toggle-item\">
                                <div class=\"toggle-switch\" id=\"codeItalic\" onclick=\"toggleSwitch('codeItalic')\"></div>
                                <label>Italic</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Caption Settings -->
                <div class=\"setting-group glass\">
                    <div class=\"setting-header\" onclick=\"toggleSection('caption')\">
                        <span><strong>üí¨ Caption Customization</strong></span>
                        <span class=\"arrow-icon\" id=\"arrow-caption\">‚ñº</span>
                    </div>
                    <div class=\"setting-content\" id=\"content-caption\">
                        <div class=\"form-group\">
                            <label>Font Family</label>
                            <select id=\"captionFont\">
                                <option value=\"Arial\">Arial</option>
                                <option value=\"Helvetica\">Helvetica</option>
                                <option value=\"Times New Roman\">Times New Roman</option>
                                <option value=\"Courier New\">Courier New</option>
                                <option value=\"Verdana\">Verdana</option>
                                <option value=\"Georgia\">Georgia</option>
                            </select>
                        </div>
                        <div class=\"form-group\">
                            <label>Font Size (px)</label>
                            <input type=\"number\" id=\"captionFontSize\" value=\"18\" min=\"8\" max=\"72\">
                        </div>
                        <div class=\"form-group\">
                            <label>Gap from Code (mm)</label>
                            <input type=\"number\" id=\"captionGap\" value=\"5\" min=\"0\" max=\"50\">
                        </div>
                        <div class=\"toggle-group\">
                            <div class=\"toggle-item\">
                                <div class=\"toggle-switch\" id=\"captionBold\" onclick=\"toggleSwitch('captionBold')\"></div>
                                <label>Bold</label>
                            </div>
                            <div class=\"toggle-item\">
                                <div class=\"toggle-switch\" id=\"captionItalic\" onclick=\"toggleSwitch('captionItalic')\"></div>
                                <label>Italic</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Separator Line Settings -->
            <div class=\"setting-group glass\" style=\"margin-top: 15px;\">
                <div class=\"setting-header\" onclick=\"toggleSection('separator')\">
                    <span><strong>‚ûñ Separator Line Settings</strong></span>
                    <span class=\"arrow-icon\" id=\"arrow-separator\">‚ñº</span>
                </div>
                <div class=\"setting-content\" id=\"content-separator\">
                    <div class=\"form-group\">
                        <div class=\"toggle-item\">
                            <div class=\"toggle-switch\" id=\"separatorEnabled\" onclick=\"toggleSwitch('separatorEnabled')\"></div>
                            <label>Enable Separator Line</label>
                        </div>
                    </div>
                    <div class=\"form-group\">
                        <label>Line Thickness (px)</label>
                        <input type=\"number\" id=\"separatorThickness\" value=\"2\" min=\"1\" max=\"10\">
                    </div>
                    <div class=\"form-group\">
                        <label>Line Color</label>
                        <input type=\"text\" id=\"separatorColor\" value=\"#000000\">
                    </div>
                    <div class=\"form-group\">
                        <label>Line Length (%)</label>
                        <input type=\"number\" id=\"separatorLength\" value=\"80\" min=\"10\" max=\"100\">
                    </div>
                </div>
            </div>

            <!-- FE Number Range -->
            <div class=\"setting-group glass\" style=\"margin-top: 15px;\">
                <div class=\"form-group\">
                    <label>Auto FE Number Range (Optional)</label>
                    <div class=\"range-input-group\">
                        <input type=\"number\" id=\"feStart\" placeholder=\"Start (e.g., 1)\" min=\"0\">
                        <span>to</span>
                        <input type=\"number\" id=\"feEnd\" placeholder=\"End (e.g., 10)\" min=\"0\">
                        <button class=\"btn btn-sm\" onclick=\"applyFERange()\">Apply Range</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Preview Section -->
        <div class=\"glass preview-section\" id=\"previewSection\" style=\"display: none;\">
            <h3 style=\"margin-bottom: 20px;\">üëÅÔ∏è QR Code Preview</h3>
            
            <!-- Input QR Row -->
            <div class=\"qr-row-label\">üì• INPUT QR CODES</div>
            <div class=\"preview-container\">
                <div class=\"qr-grid\" id=\"inputQrGrid\"></div>
            </div>

            <!-- Output QR Row -->
            <div class=\"qr-row-label\" style=\"margin-top: 30px;\">üì§ ENHANCED QR CODES</div>
            <div class=\"preview-container\">
                <div class=\"qr-grid\" id=\"outputQrGrid\"></div>
            </div>
        </div>

        <!-- Data Table -->
        <div class=\"glass data-table-section\" id=\"tableSection\" style=\"display: none;\">
            <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;\">
                <h3>üìä QR Code Data Table</h3>
                <button class=\"btn btn-sm\" onclick=\"toggleTable()\">
                    <span id=\"tableToggleText\">Expand ‚ñº</span>
                </button>
            </div>
            <div class=\"table-container\" id=\"tableContainer\">
                <table>
                    <thead>
                        <tr>
                            <th>Sr. No.</th>
                            <th>Code</th>
                            <th>Caption</th>
                            <th>FE No.</th>
                            <th>QR Link/Text</th>
                        </tr>
                    </thead>
                    <tbody id=\"dataTableBody\"></tbody>
                </table>
            </div>
        </div>

        <!-- Export Section -->
        <div class=\"export-section\" id=\"exportSection\" style=\"display: none;\">
            <button class=\"btn\" onclick=\"exportToExcel()\">üìä Export to Excel</button>
            <button class=\"btn\" onclick=\"exportToPDF()\">üìÑ Export to PDF</button>
            <button class=\"btn btn-secondary\" onclick=\"downloadZip('png')\">üì¶ Download All PNG (ZIP)</button>
            <button class=\"btn btn-secondary\" onclick=\"downloadZip('jpg')\">üì¶ Download All JPG (ZIP)</button>
            <button class=\"btn btn-secondary\" onclick=\"downloadZip('svg')\">üì¶ Download All SVG (ZIP)</button>
        </div>
    </div>

    <script>
        // Global State
        let qrData = [];
        let settings = {
            qrSize: 512,
            codeFont: 'Arial',
            codeFontSize: 24,
            codeGap: 5,
            codeBold: false,
            codeItalic: false,
            captionFont: 'Arial',
            captionFontSize: 18,
            captionGap: 5,
            captionBold: false,
            captionItalic: false,
            separatorEnabled: false,
            separatorThickness: 2,
            separatorColor: '#000000',
            separatorLength: 80
        };

        // Initialize
        document.getElementById('uploadArea').addEventListener('click', () => {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', handleFileUpload);

        // Add event listeners for real-time updates
        document.querySelectorAll('input, select').forEach(element => {
            element.addEventListener('input', updateAllPreviews);
            element.addEventListener('change', updateAllPreviews);
        });

        // Toggle Section
        function toggleSection(id) {
            const content = document.getElementById(`content-${id}`);
            const arrow = document.getElementById(`arrow-${id}`);
            content.classList.toggle('expanded');
            arrow.classList.toggle('rotated');
        }

        // Toggle Switch
        function toggleSwitch(id) {
            const toggle = document.getElementById(id);
            toggle.classList.toggle('active');
            settings[id] = toggle.classList.contains('active');
            updateAllPreviews();
        }

        // Toggle Table
        function toggleTable() {
            const container = document.getElementById('tableContainer');
            const text = document.getElementById('tableToggleText');
            if (container.classList.contains('expanded')) {
                container.classList.remove('expanded');
                text.textContent = 'Expand ‚ñº';
            } else {
                container.classList.add('expanded');
                text.textContent = 'Collapse ‚ñ≤';
            }
        }

        // Extract Code from URL
        function extractCode(url) {
            const match = url.match(/=([A-Za-z0-9]{6})(?:[&?]|$)/);
            return match ? match[1] : 'N/A';
        }

        // Handle File Upload
        async function handleFileUpload(event) {
            const files = event.target.files;
            if (!files.length) return;

            qrData = [];
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const imageUrl = await readFileAsDataURL(file);
                const qrContent = await decodeQR(imageUrl);
                
                if (qrContent) {
                    const code = extractCode(qrContent);
                    qrData.push({
                        id: i,
                        fileName: file.name,
                        inputImage: imageUrl,
                        content: qrContent,
                        code: code,
                        caption: '',
                        feNumber: ''
                    });
                }
            }

            if (qrData.length > 0) {
                updateUI();
                updateAllPreviews();
            }
        }

        // Read File as Data URL
        function readFileAsDataURL(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.readAsDataURL(file);
            });
        }

        // Decode QR Code using jsQR
        async function decodeQR(imageUrl) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const code = jsQR(imageData.data, imageData.width, imageData.height);
                    
                    resolve(code ? code.data : null);
                };
                img.src = imageUrl;
            });
        }

        // Update UI
        function updateUI() {
            document.getElementById('previewSection').style.display = 'block';
            document.getElementById('tableSection').style.display = 'block';
            document.getElementById('exportSection').style.display = 'flex';

            // Update global caption
            const globalCaption = document.getElementById('globalCaption').value;
            if (globalCaption) {
                qrData.forEach(item => {
                    if (!item.caption) item.caption = globalCaption;
                });
            }

            updateInputPreviews();
            updateDataTable();
        }

        // Update Input Previews
        function updateInputPreviews() {
            const grid = document.getElementById('inputQrGrid');
            grid.innerHTML = '';

            qrData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'qr-card';
                card.innerHTML = `
                    <div class=\"qr-preview\">
                        <img src=\"${item.inputImage}\" alt=\"Input QR\" style=\"width: 200px; height: 200px; object-fit: contain;\">
                    </div>
                    <div class=\"code-chip\">${item.code}</div>
                `;
                grid.appendChild(card);
            });
        }

        // Update Data Table
        function updateDataTable() {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = '';

            qrData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.code}</td>
                    <td><input type=\"text\" value=\"${item.caption}\" onchange=\"updateCaption(${index}, this.value)\"></td>
                    <td><input type=\"text\" value=\"${item.feNumber}\" onchange=\"updateFENumber(${index}, this.value)\"></td>
                    <td style=\"font-size: 12px; max-width: 300px; overflow: hidden; text-overflow: ellipsis;\">${item.content}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Update Caption
        function updateCaption(index, value) {
            qrData[index].caption = value;
            updateAllPreviews();
        }

        // Update FE Number
        function updateFENumber(index, value) {
            qrData[index].feNumber = value;
            updateAllPreviews();
        }

        // Apply FE Range
        function applyFERange() {
            const start = parseInt(document.getElementById('feStart').value) || 1;
            const end = parseInt(document.getElementById('feEnd').value) || qrData.length;
            
            for (let i = 0; i < qrData.length && i < (end - start + 1); i++) {
                qrData[i].feNumber = (start + i).toString();
            }
            
            updateDataTable();
            updateAllPreviews();
        }

        // Update All Previews
        function updateAllPreviews() {
            // Update settings from inputs
            settings.qrSize = parseInt(document.getElementById('qrSize').value) || 512;
            settings.codeFont = document.getElementById('codeFont').value;
            settings.codeFontSize = parseInt(document.getElementById('codeFontSize').value) || 24;
            settings.codeGap = parseInt(document.getElementById('codeGap').value) || 5;
            settings.captionFont = document.getElementById('captionFont').value;
            settings.captionFontSize = parseInt(document.getElementById('captionFontSize').value) || 18;
            settings.captionGap = parseInt(document.getElementById('captionGap').value) || 5;
            settings.separatorThickness = parseInt(document.getElementById('separatorThickness').value) || 2;
            settings.separatorColor = document.getElementById('separatorColor').value;
            settings.separatorLength = parseInt(document.getElementById('separatorLength').value) || 80;

            updateOutputPreviews();
        }

        // Update Output Previews
        async function updateOutputPreviews() {
            const grid = document.getElementById('outputQrGrid');
            grid.innerHTML = '';

            for (const item of qrData) {
                const svgData = await generateEnhancedQR(item);
                item.svgData = svgData;

                const card = document.createElement('div');
                card.className = 'qr-card';
                
                const previewDiv = document.createElement('div');
                previewDiv.className = 'qr-preview';
                previewDiv.innerHTML = svgData;
                
                card.appendChild(previewDiv);
                
                const chip = document.createElement('div');
                chip.className = 'code-chip';
                chip.textContent = item.code;
                card.appendChild(chip);
                
                const buttonsDiv = document.createElement('div');
                buttonsDiv.className = 'download-buttons';
                buttonsDiv.innerHTML = `
                    <button class=\"btn btn-sm\" onclick=\"downloadQR(${item.id}, 'png')\">PNG</button>
                    <button class=\"btn btn-sm\" onclick=\"downloadQR(${item.id}, 'jpg')\">JPG</button>
                    <button class=\"btn btn-sm\" onclick=\"downloadQR(${item.id}, 'svg')\">SVG</button>
                `;
                card.appendChild(buttonsDiv);
                
                grid.appendChild(card);
            }
        }

        // Generate Enhanced QR with Code and Caption
        async function generateEnhancedQR(item) {
            const qrSize = settings.qrSize;
            const mmToPx = 3.7795; // Conversion factor
            
            // Generate QR code
            const qrCanvas = document.createElement('canvas');
            await QRCode.toCanvas(qrCanvas, item.content, {
                width: qrSize,
                margin: 1,
                errorCorrectionLevel: 'H'
            });

            // Calculate dimensions
            const codeGapPx = settings.codeGap * mmToPx;
            const captionGapPx = settings.captionGap * mmToPx;
            
            let totalHeight = qrSize + codeGapPx + settings.codeFontSize;
            
            const fullCaption = item.caption + item.feNumber;
            if (fullCaption) {
                if (settings.separatorEnabled) {
                    totalHeight += captionGapPx + settings.separatorThickness + captionGapPx;
                } else {
                    totalHeight += captionGapPx;
                }
                totalHeight += settings.captionFontSize;
            }

            // Create SVG
            let svg = `<svg width=\"${qrSize}\" height=\"${totalHeight}\" xmlns=\"http://www.w3.org/2000/svg\">`;
            
            // Add QR code as image
            const qrDataUrl = qrCanvas.toDataURL();
            svg += `<image href=\"${qrDataUrl}\" width=\"${qrSize}\" height=\"${qrSize}\" />`;
            
            // Add code text
            let currentY = qrSize + codeGapPx + settings.codeFontSize;
            const codeFontWeight = settings.codeBold ? 'bold' : 'normal';
            const codeFontStyle = settings.codeItalic ? 'italic' : 'normal';
            
            svg += `<text x=\"${qrSize / 2}\" y=\"${currentY}\" 
                    font-family=\"${settings.codeFont}\" 
                    font-size=\"${settings.codeFontSize}\" 
                    font-weight=\"${codeFontWeight}\"
                    font-style=\"${codeFontStyle}\"
                    text-anchor=\"middle\" 
                    fill=\"black\">${item.code}</text>`;
            
            // Add separator line if enabled
            if (settings.separatorEnabled && fullCaption) {
                currentY += captionGapPx;
                const lineWidth = (qrSize * settings.separatorLength) / 100;
                const lineX = (qrSize - lineWidth) / 2;
                svg += `<line x1=\"${lineX}\" y1=\"${currentY}\" 
                        x2=\"${lineX + lineWidth}\" y2=\"${currentY}\" 
                        stroke=\"${settings.separatorColor}\" 
                        stroke-width=\"${settings.separatorThickness}\" />`;
                currentY += captionGapPx + settings.separatorThickness;
            } else if (fullCaption) {
                currentY += captionGapPx;
            }
            
            // Add caption text
            if (fullCaption) {
                const captionFontWeight = settings.captionBold ? 'bold' : 'normal';
                const captionFontStyle = settings.captionItalic ? 'italic' : 'normal';
                
                svg += `<text x=\"${qrSize / 2}\" y=\"${currentY + settings.captionFontSize}\" 
                        font-family=\"${settings.captionFont}\" 
                        font-size=\"${settings.captionFontSize}\" 
                        font-weight=\"${captionFontWeight}\"
                        font-style=\"${captionFontStyle}\"
                        text-anchor=\"middle\" 
                        fill=\"black\">${fullCaption}</text>`;
            }
            
            svg += '</svg>';
            return svg;
        }

        // Download Single QR
        async function downloadQR(id, format) {
            const item = qrData.find(d => d.id === id);
            if (!item) return;

            const fileName = `QR_${item.code}_${item.feNumber || 'enhanced'}`;

            if (format === 'svg') {
                const blob = new Blob([item.svgData], { type: 'image/svg+xml' });
                saveAs(blob, `${fileName}.svg`);
            } else {
                const canvas = await svgToCanvas(item.svgData);
                canvas.toBlob((blob) => {
                    saveAs(blob, `${fileName}.${format}`);
                }, `image/${format}`);
            }
        }

        // Convert SVG to Canvas
        function svgToCanvas(svgString) {
            return new Promise((resolve) => {
                const img = new Image();
                const blob = new Blob([svgString], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);
                
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                    URL.revokeObjectURL(url);
                    resolve(canvas);
                };
                
                img.src = url;
            });
        }

        // Download All as ZIP
        async function downloadZip(format) {
            const zip = new JSZip();
            
            for (const item of qrData) {
                const fileName = `QR_${item.code}_${item.feNumber || 'enhanced'}`;
                
                if (format === 'svg') {
                    zip.file(`${fileName}.svg`, item.svgData);
                } else {
                    const canvas = await svgToCanvas(item.svgData);
                    const blob = await new Promise(resolve => canvas.toBlob(resolve, `image/${format}`));
                    zip.file(`${fileName}.${format}`, blob);
                }
            }
            
            const content = await zip.generateAsync({ type: 'blob' });
            saveAs(content, `QR_Codes_${format}.zip`);
        }

        // Export to Excel
        function exportToExcel() {
            const data = qrData.map((item, index) => ({
                'Sr. No.': index + 1,
                'Code': item.code,
                'Caption': item.caption,
                'FE No.': item.feNumber,
                'QR Link/Text': item.content
            }));

            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'QR Codes');
            XLSX.writeFile(wb, 'QR_Codes_Data.xlsx');
        }

        // Export to PDF
        async function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(16);
            doc.text('QR Code Data Report', 105, 15, { align: 'center' });
            
            doc.setFontSize(10);
            let y = 30;
            
            doc.text('Sr.', 10, y);
            doc.text('Code', 30, y);
            doc.text('Caption', 60, y);
            doc.text('FE No.', 100, y);
            doc.text('QR Link/Text', 130, y);
            
            y += 7;
            doc.line(10, y, 200, y);
            y += 5;
            
            qrData.forEach((item, index) => {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                
                doc.text((index + 1).toString(), 10, y);
                doc.text(item.code, 30, y);
                doc.text(item.caption || '-', 60, y);
                doc.text(item.feNumber || '-', 100, y);
                
                const truncatedLink = item.content.length > 30 ? 
                    item.content.substring(0, 30) + '...' : item.content;
                doc.text(truncatedLink, 130, y);
                
                y += 7;
            });
            
            doc.save('QR_Codes_Report.pdf');
        }

        // Reset All
        function resetAll() {
            qrData = [];
            document.getElementById('fileInput').value = '';
            document.getElementById('globalCaption').value = '';
            document.getElementById('feStart').value = '';
            document.getElementById('feEnd').value = '';
            
            document.getElementById('previewSection').style.display = 'none';
            document.getElementById('tableSection').style.display = 'none';
            document.getElementById('exportSection').style.display = 'none';
            
            document.getElementById('inputQrGrid').innerHTML = '';
            document.getElementById('outputQrGrid').innerHTML = '';
            document.getElementById('dataTableBody').innerHTML = '';
        }
    </script>
</body>
</html>
"
Observation: Create successful: /app/index.html
